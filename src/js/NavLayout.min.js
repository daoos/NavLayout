var indexOf,_nl_DEBUG=0;function alr(element,type,callback,capture){element.addEventListener?element.addEventListener(type,callback,capture):element.attachEvent("on"+type,callback)}function rlr(element,type,callback){element.removeEventListener?element.removeEventListener(type,callback):element.detachEvent("on"+type,callback)}indexOf="function"==typeof Array.prototype.indexOf?function(haystack,needle){return haystack.indexOf(needle)}:function(haystack,needle){for(var i=0,length=haystack.length,idx=-1,found=!1;i<length&&!found;)haystack[i]===needle&&(idx=i,found=!0),i++;return idx};var _nl_rChilds=function(node){for(var last;last=node.lastChild;)node.removeChild(last)};function _T(linkItems){this.current=void 0,this.size=0}function _nlUId(){}function stopPropagation(e){if(!e)var e=window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}function _stp(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),stopPropagation(e)}function chkDef(e){null==e.defaultPrevented&&(e.defaultPrevented=!1,e.preventDefault=function preventDefault(){e.defaultPrevented=!0})}function _nlM(s,n){return s.className.match?s.className.match(n):null}function aCls(ele,cls){ele.classList?ele.classList.add(cls):_nlM(ele,cls)||ele.setAttribute("class",ele.getAttribute("class")+" "+cls)}function rCls(ele,cls){ele.classList?ele.classList.remove(cls):_nlM(ele,cls)&&ele.setAttribute("class",ele.getAttribute("class").replace(cls," "))}function shE(e,m){e.style.visibility=1==m?"visible":"hidden"}function _cST(e,s,v){(isNaN(v)||null==v||v<0)&&(v=0),"h"==s?e.style.height=v+"px":"w"==s?e.style.width=v+"px":"t"==s?e.style.top=v+"px":"l"==s?e.style.left=v+"px":"z"==s&&(e.style.zIndex=v)}function extendDefaults(source,properties){var property;for(property in properties)properties.hasOwnProperty(property)&&(source[property]=properties[property]);return source}function cElem(p,tp,cls,css,html){var o=document.createElement(tp);return o.className=cls,o.style.cssText=css,o.innerHTML=html,p.appendChild(o),o}function _nl_FadeDock(ob,ops,ope){ops<ope&&(ops+=.1,setTimeout(function(){_nl_FadeDock(ob,ops,ope)},35)),ob.style.opacity=ops,ob.style.filter="alpha(opacity="+100*ops+")",ob.style.MozOpacity=ops,ob.style.KhtmlOpacity=ops}function rItem(_p,o){o._e.item&&(0==o.wd?_cST(o._e.item,"h",o.H-_p._ibz):0==o.fbrd&&1==o.ste?_p.frBrd(o):(_cST(o._e.item,"h",o._g.o?o.H-_p._ibz:o.H-_p.ibh),_cST(o._e.item,"w",o.W-_p.ibw))),o.rz&&(_cST(o.rz,"t",o.H-o.rz.offsetHeight),_cST(o.rz,"l",o.W-o.rz.offsetWidth))}function emitR(_p,o){_p.emit("resized",o)}function rwP(_p,t){rCls(t._e.hd.tab.o,"_nl_widget"),rCls(t._e.hd.tab.o,"_nl_widget_hover"),aCls(t._e.hd.tab.o,"_nl_tab"),shE(t._e.hd.tab.o,1),_cST(t._e.item,"t",_p._ibz-_p.ibh)}_T.noop=function(){return this},_T.illegal=function(){throw new Error("illegal operation for _nlHTs")},_T.from=function(o,foreignKeys){var _T=new _T;for(var prop in o)(foreignKeys||o.hasOwnProperty(prop))&&_T.put(prop,o[prop]);return _T},_nlUId.prototype._id=0,_nlUId.prototype.generateId=function(){return(++_nlUId.prototype._id).toString()},_T.prototype.hash=function(value){return"string"==typeof value?value:(void 0==value.__hash&&(value.__hash=_nlUId.prototype.generateId()),value.__hash)},_T.prototype.hash.current=0,_T.prototype.get=function(key){var item=this[this.hash(key)];return void 0===item?void 0:item.value},_T.prototype.put=function(key,value){var hash=this.hash(key);if(void 0===this[hash]){var item={key:key,value:value};this[hash]=item,this.link(item),++this.size}else this[hash].value=value;return this},_T.prototype.remove=function(key){var hash=this.hash(key),item=this[hash];return void 0!==item&&(--this.size,this.unlink(item),delete this[hash]),this},_T.prototype.removeAll=function(){for(;this.size;)this.remove(this.key());return this},_T.prototype.link=function(item){0==this.size?(item.prev=item,item.next=item,this.current=item):(item.prev=this.current.prev,item.prev.next=item,item.next=this.current,this.current.prev=item)},_T.prototype.unlink=function(item){0==this.size?this.current=void 0:(item.prev.next=item.next,item.next.prev=item.prev,item===this.current&&(this.current=item.next))},_T.prototype.next=function(){this.current=this.current.next},_T.prototype.key=function(){return this.current.key},_T.prototype.value=function(){return this.current.value};var nlbx="box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",_nl_OF="overflow:hidden;",_bp="padding:0;margin:0;",NavLayout=function(){this.o=null,this.B=0,this.tSP=1,this.d0=0,this.d2=0,this.d4=0,this.H=0,this.W=0,this.T=0,this.L=0,this.rect=0,this.HS=0,this._H_=null,this._I_=null,this._RC=new _T,this._RT=new _T,this.sg=0,this._ibz=0,this.mObj=null,this.pOut=null,this.mE={eX:0,eY:0,dwn:0,drg:null,_dE:null,dob:null,cSP:null,rsz:null,laT:null,_dT:null,eTimer:null,ldT:{o:null,X:0,Y:0,D:"",R:0,hE:null,fE:null,h:0,w:0,t:0,l:0}},this.events={},this.tDrpDwn=null,this.tgHdrCtrl=null,this.uLck=null,this.EvReg=[],this.dLockT=150,this.aniS=10,this.aniJ=1,this.tMove=null,this.dArea=null,this.tmH=10,this.spX=[],this.spY=[],this.tbh=0,this.tbw=0,this.ibh=0,this.ibw=0,this.spMD=6,this.daH=0,this.daW=0,this.dhH=0,this.dhW=0,this.drH=0,this.drW=0;var defaults={Config:{spliter:{area:"5px",bar:"5px"},data:[{type:"",name:"",connected:null,title:"",body:""}]},ContainerObject:null};arguments[0]&&"object"==typeof arguments[0]&&(this.options=extendDefaults(defaults,arguments[0]));var _p=this,x=0,_s_=_p.options.Config;_p.o=_p.options.ContainerObject;var c_=nlbx+"display:block;position:absolute;"+_bp+"height:0;width:0;",rtc=cElem(_p.o,"div","_nl","",""),hdrsz=cElem(rtc,"div","_nl_header",nlbx+"display:block;position:absolute;border:0;"+_bp,"");_p.HS=hdrsz.offsetHeight,rtc.removeChild(hdrsz);var hdrsz=cElem(rtc,"div","_nl_header",c_,"");_p._ibz=_p.HS+hdrsz.offsetHeight;var isz=cElem(hdrsz,"div","_nl_tab",nlbx+"position:absolute;","");_p.tbh=isz.offsetHeight,_p.tbw=isz.offsetWidth,hdrsz.removeChild(isz),rtc.removeChild(hdrsz);var hdrsz=cElem(rtc,"div","_nl_item",c_,"");_p._ibz+=hdrsz.offsetHeight,_p.ibh=hdrsz.offsetHeight,_p.ibw=hdrsz.offsetWidth,rtc.removeChild(hdrsz),_p.o.removeChild(rtc);var da=cElem(_p.o,"div","_nl_dockRoot",c_,"");_p.drH=da.offsetHeight,_p.drW=da.offsetWidth,_p.o.removeChild(da);var da=cElem(_p.o,"div","_nl_dockTab",c_,"");_p.daH=da.offsetHeight,_p.daW=da.offsetWidth,_p.o.removeChild(da);var da=cElem(_p.o,"div","_nl_dockHeader",c_,""),isz;_p.dhH=da.offsetHeight,_p.dhW=da.offsetWidth,_p.o.removeChild(da),(isz=document.createElement("div")).className="_nl_sp_active",isz.style.cssText=c_,_p.o.appendChild(isz),_p.d2=isz.offsetHeight,_p.o.removeChild(isz),_s_.tabs&&(_s_.tabs.dragLockTime&&(_p.dLockT=parseFloat(_s_.tabs.dragLockTime)),_s_.tabs.animationJump&&(_p.aniJ=parseFloat(_s_.tabs.animationJump)),_s_.tabs.animationSpeed&&(_p.aniS=parseFloat(_s_.tabs.animationSpeed)),_s_.tabs.moveBgSize&&(_p.tmH=parseFloat(_s_.tabs.moveBgSize)));var B=parseFloat(_s_.spliter.areaSize.replace("px",""));_p.B=B;var barsz=parseFloat(_s_.spliter.barSize.replace("px",""));_p.d0=barsz-_p.d2,_p.d0<0&&(_p.d0=1),_p.d4=B/2-(_p.d0+_p.d2)/2,_s_.tabs&&_s_.tabs.spacing&&(_p.tSP=parseFloat(_s_.tabs.spacing.replace("px",""))),_p.o.insertAdjacentHTML("afterbegin",'<div class="_nl_tab_unlock" style="position:absolute;z-Index:2;"></div>'),_p.uLck=_p.o.children[0],shE(_p.uLck),_p.o.insertAdjacentHTML("afterbegin",'<div class="_nl_tab_move" style="position:absolute;z-Index:2;"></div>'),_p.tMove=_p.o.children[0],shE(_p.tMove),_p.CreateSpAni("X"),_p.CreateSpAni("Y"),_p.o.insertAdjacentHTML("afterbegin",'<div style="position:absolute;"></div>'),_p.dArea=_p.o.children[0],_p.o.insertAdjacentHTML("afterbegin",'<div class="_nl_tabGroupList" style="position:absolute;z-Index:10;"><ul class="_#_"></ul></div>'),_p.tDrpDwn={o:_p.o.children[0],gH:null},shE(_p.tDrpDwn.o);var oEv={obj:_p.tDrpDwn.o,type:"mousedown",callback:function(e){var e,s=null;if((e=window.event||e).srcElement?s=e.srcElement:e.target&&(s=e.target),!_nlM(s,"_#_")){for(var idx=-1,oo=_p.tDrpDwn.o.children[0].children,x=0;x<oo.length;x++)if(s.parentNode==oo[x]){idx=x;break}if(idx>-1&&_p.tDrpDwn.gH.length){var s,g=(s=_p.tDrpDwn.gH[idx])._g.o;g._a!=s&&(g._a=s,g.I=idx,_p.utgG(g))}_p.eDWM()}return e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),stopPropagation(e),!1}};alr(_p.tDrpDwn.o,oEv.type,oEv.callback,!0),_p.EvReg.push(oEv),_p.o.insertAdjacentHTML("afterbegin",'<div class="_nl_tabGroupHdrCtrlsList" style="position:absolute;z-Index:10;display:list-item;"></div>'),_p.tgHdrCtrl={o:_p.o.children[0],tab:{o:null,l:[]}},shE(_p.tgHdrCtrl.o);var oEv={obj:_p.tgHdrCtrl.o,type:"mousedown",callback:function(e){var e,s=null;(e=window.event||e).srcElement?s=e.srcElement:e.target&&(s=e.target),chkDef(e);for(var idx=-1,oo=_p.tgHdrCtrl.o.children,x=0;x<oo.length;x++)if(s.className==oo[x].className){idx=x;break}return shE(_p.tgHdrCtrl.o),_p.tgHdrCtrl.tab.l[idx].f(e,_p,_p.tgHdrCtrl.tab.o,_p.tgHdrCtrl.tab.l[idx].o),e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),stopPropagation(e),!1}};alr(_p.tgHdrCtrl.o,oEv.type,oEv.callback,!0),_p.EvReg.push(oEv),_p.update(),_p.addTab(_s_.data),_p.AttachMouseEvents(),_p._nl_replay&&_p._nl_replay(_p)};NavLayout.prototype.update=function(e){var _p=this;_p.rect=_p.o.getBoundingClientRect();var OH=_p.o.offsetHeight,OW=_p.o.offsetWidth,OT=_p.o.offsetTop,OL=_p.o.offsetLeft,p=100*(_p.o.offsetHeight-_p.H)/_p.H,B=_p.B*_p._RT.size;_p.sg=_p.sg+1;for(var i=0;i++<_p._RT.size;_p._RT.next())_p.eRSZ(_p._RT.value(),_p.H,_p.W,OH,OW,0,0,0,0,B,_p.sg);if(_p.mObj&&_p.mszC(),_p.pOut)for(var i=0;i++<_p.pOut.size;_p.pOut.next()){var o=_p.pOut.value();o.T=OH*(100*o.T/_p.H)/100,o.L=OW*(100*o.L/_p.W)/100,_p.mObj!=o&&(_cST(o.o,"t",o.T),_cST(o.o,"l",o.L),1==o.resz&&(o.H=OH*(100*o.H/_p.H)/100,o.W=OW*(100*o.W/_p.W)/100,_cST(o.o,"h",o.H),_cST(o.o,"w",o.W),rItem(_p,o),_p.rnot(o),emitR(_p,o)))}_p.H=OH,_p.W=OW,_p.T=OT,_p.L=OL,_p.eDWM()},NavLayout.prototype.destroy=function(){for(var _p=this,i=0;i++<_p._RC.size;_p._RC.next()){for(var o=_p._RC.value(),x=0;x<o.EvReg.length;x++)rlr(o.o,o.EvReg[x].type,o.EvReg[x].callback);o.o.parentNode.removeChild(o.o),delete o._e,delete o.EvReg}_p._RC.removeAll(),_p._RT.removeAll();for(var x=0;x<_p.EvReg.length;x++)rlr(t.EvReg[x].obj,t.EvReg[x].type,t.EvReg[x].callback);delete _p.mE,delete _p.EvReg},NavLayout.prototype.addTab=function(_d){for(var D="",_p=this,tab=null,t,l,h,w,te=[],x=0;x<_d.length;x++)_d[x]&&(t=0,l=0,h=0,w=0,_d[x].top&&(_d[x].top.search("px")>-1?t=_d[x].top.replace("px",""):_d[x].top.search("%")>-1?(t=_d[x].top.replace("%",""),t=_p.H*t/100):t=_d[x].top),_d[x].left&&(_d[x].left.search("px")>-1?l=_d[x].left.replace("px",""):_d[x].left.search("%")>-1?(l=_d[x].left.replace("%",""),l=_p.W*l/100):l=_d[x].left),_d[x].height&&(_d[x].height.search("px")>-1?h=_d[x].height.replace("px",""):_d[x].height.search("%")>-1?(h=_d[x].height.replace("%",""),h=_p.H*h/100):h=_d[x].height),_d[x].width&&(_d[x].width.search("px")>-1?w=_d[x].width.replace("px",""):_d[x].width.search("%")>-1?(w=_d[x].width.replace("%",""),w=_p.W*w/100):w=_d[x].width),tab=_p.createTab(_d[x],t,l,h,w),tar=_d[x].connect?_p.getTab(_d[x].connect):null,tar&&1==tar.ste&&(tar=null),null==_d[x].dock.match("float")&&1==tab.dck?(D=tar&&_d[x].dock.match("header")?"headerLeft"==_d[x].dock?"HL":"HR":"top"==_d[x].dock?"RU":"bottom"==_d[x].dock?"RD":"left"==_d[x].dock?"CL":"right"==_d[x].dock?"CR":"RD",_p.attach(tar,tab,D)):_p.mFloat(tab),te.push(tab));setTimeout(function(){for(var x=0;x<te.length;x++)_p.emit("tabCreated",te[x])},1)},NavLayout.prototype.CreateSpAni=function(cor){for(var _p=this,i=1;i<3;i++){_p.o.insertAdjacentHTML("afterbegin",'<div class="_nl_sp_'+cor+i+'" style="position:absolute;z-Index:2;"></div>');var c=_p.o.children[0];"X"==cor?_p.spX.push(c):"Y"==cor&&_p.spY.push(c),shE(c)}},NavLayout.prototype.addTabGrp=function(t,s,d){var _p=this;if("T"==t.type){if(null==t._g.o){var _g,ro;if((_g={name:"Gruop",type:"G",pt:null,ch:[],H:0,W:0,T:0,L:0,o:null,_a:null,pI:0,I:0,tb:null,sg:0}).o=_g,t._g.o=_g,_g.pt=t.pt,t.pt=null,_g.T=t.T,_g.L=t.L,_g.H=t.H,_g.W=t.W,_g.pt)for(var i=0;i++<_g.pt.size;_g.pt.next()){var pt=_g.pt.value();"H"==pt.type?t.T<pt.T?(_p._del(pt.s.P,t),pt.s.P.put(_g,_g)):(_p._del(pt.s.N,t),pt.s.N.put(_g,_g)):"V"==pt.type&&(t.L<pt.L?(_p._del(pt.s.P,t),pt.s.P.put(_g,_g)):(_p._del(pt.s.N,t),pt.s.N.put(_g,_g)))}else _p._RT.get(t.o)&&(_p._RT.remove(t.o),_p._RT.put(_g,_g));"HR"==d?(_g.ch.push(t),t._g.i=0,t._g.o.ch.push(s),s._g.i=1):"HL"==d&&(t._g.o.ch.push(s),s._g.i=0,_g.ch.push(t),t._g.i=1),1==t.wd&&rwP(_p,t)}else{var shf=0,_g;(_g=t._g.o).ch.push(s);for(var x=_g.ch.length-1;x>=0;x--){var a;if(_g.ch[x]==t){"HR"==d?(_g.ch[x+1]=s,s._g.i=x+1,t._g.i=x):"HL"==d&&(_g.ch[x]=s,s._g.i=x);break}_g.ch[x]=_g.ch[x-1],_g.ch[x]._g.i=x}}s._g.o=t._g.o,s._g.o._a=s,1==s.wd&&rwP(_p,s),_p.setTabWidth(t),_p.setTabWidth(s),shE(s._e.hd.ctl.o),shE(t._e.hd.ctl.o),_p.utgG(s._g.o)}},NavLayout.prototype.delTabGrp=function(o){var _p=this,_g=o._g.o;if(_g.dd==o&&_p.rDwn(_g),_g){if(2==_g.ch.length){var l=_g.ch[0]==o?_g.ch[1]:_g.ch[0],ro;if(l.T=_g.T,l.L=_g.L,l.H=_g.H,l.W=_g.W,_cST(l.o,"h",l.H),_cST(l.o,"w",l.W),_cST(l.o,"l",l.L),rItem(_p,l),_cST(l.o,"z",0),emitR(_p,l),_g.pt)for(var i=0;i++<_g.pt.size;_g.pt.next()){var pt=_g.pt.value();"H"==pt.type?_g.T<pt.T?(_p._del(pt.s.P,_g),pt.s.P.put(l.o,l)):(_p._del(pt.s.N,_g),pt.s.N.put(l.o,l)):"V"==pt.type&&(_g.L<pt.L?(_p._del(pt.s.P,_g),pt.s.P.put(l.o,l)):(_p._del(pt.s.N,_g),pt.s.N.put(l.o,l)))}else _p._RT.get(_g)&&(_p._RT.remove(_g),_p._RT.put(l.o,l));l._g.o=null,o._g.i=-1,o._g.h=0,l.pt=_g.pt,_p.rtMenu(_g),_g._a=null,_g.ch.length=0,delete _g.ch,o._g.o=null,o._g.i=-1,o._g.h=0,o.pt=null,l._e.hd.tab.o.style.width="auto",_cST(l._e.hd.tab.o,"l",0),rCls(l._e.hd.tab.o,"_nl_tab_inactive"),l._e.hd.ctl.ctrl.length?shE(l._e.hd.ctl.o,1):shE(l._e.hd.ctl.o),_p.rnot(l),l.ct&&(l._e.hd.tab.ctl.del(l.ct),l.ct=null),1==l.wd&&(shE(l._e.hd.tab.o),rCls(l._e.hd.tab.o,"_nl_tab"),rCls(l._e.hd.tab.o,"_nl_tab_hover"),aCls(l._e.hd.tab.o,"_nl_widget"),_cST(l._e.item,"t",0),_cST(l._e.item,"l",0),rItem(_p,l))}else{for(var shf=0,x=0;x<_g.ch.length;x++){var c;_g.ch[x]==o&&(shf=1,_g._a=0==x?_g.ch[x+1]:_g.ch[x-1]),shf&&x+1<_g.ch.length&&(_g.ch[x]=_g.ch[x+1],_g.ch[x]._g.i=x)}_g.ch.pop(),0==o._g.i?o._g.o.I=0:o._g.o.I=o._g.i-1,_p.utgG(_g),o._g.o=null,o._g.i=-1,o._g.h=0,o.pt=null}o.ct&&(o._e.hd.tab.ctl.del(o.ct),o.ct=null),rCls(o._e.hd.tab.o,"_nl_tab_inactive"),o._e.hd.ctl.ctrl.length?shE(o._e.hd.ctl.o,1):shE(o._e.hd.ctl.o),1==o.wd?(shE(o._e.hd.tab.o),rCls(o._e.hd.tab.o,"_nl_tab"),rCls(o._e.hd.tab.o,"_nl_tab_hover"),aCls(o._e.hd.tab.o,"_nl_widget"),_cST(o._e.item,"t",0),_cST(o._e.item,"l",0)):_cST(o._e.hd.ctl.o,"z",0)}},NavLayout.prototype.utgG=function(g,uto){for(var _p=this,pO=0,pL=0,_w=g.W,_L=0,cw=0,x=0;x<g.ch.length;x++){var c;cw+=(c=g.ch[x])._e.hd.tab.o.offsetWidth+_p.tSP,c.T=g.T,c.L=g.L,c.H=g.H,c.W=g.W,c.o.offsetLeft+c.o.offsetWidth<g.L&&(_p.hideT(g,c),c._g.h=2),null==c.ct&&c._e.hd.ctl.ctrl.length?c.ct=c._e.hd.tab.ctl.add("end",'<li class="_nl_HdrCtrls"></li>',function(ev,nl,tab,obj){nl.eDWM();for(var cl="",tc=tab._e.hd.ctl,y=0;y<tc.ctrl.length;y++){var c=tc.ctrl[y];nl.tgHdrCtrl.tab.l.push(c)}nl.tgHdrCtrl.o.innerHTML=tc.o.innerHTML,shE(nl.tgHdrCtrl.o,1),_cST(nl.tgHdrCtrl.o,"t",tab.o.offsetTop+nl.HS),_cST(nl.tgHdrCtrl.o,"l",obj.getBoundingClientRect().left-nl.rect.left),nl.tgHdrCtrl.tab.o=tab,aCls(nl.tgHdrCtrl.o,"_nl_tabGroupHdrCtrlsList_show")}):c.ct&&0==c._e.hd.ctl.ctrl.length&&(c._e.hd.tab.ctl.del(c.ct),c.ct=null),uto&&(c._e.hd.tab.o.style.width="auto",g._a!=c?_cST(c.o,"w",c._e.hd.tab.o.offsetWidth+c._e.hd.tab.ctl.o.offsetWidth):_cST(c._e.hd.tab.o,"w",2*c._e.hd.tab.o.offsetWidth),_p.setTabWidth(c))}if(cw<=g.W)g.I=0,_p.rtMenu(g);else if(g.pI!=g.I){for(var x=g.pI;x<g.I;x++)_p.hideT(g,g.ch[x]),g.ch[x]._g.h=2,g._a==g.ch[x]&&(g._a=g.ch[g.I]);g.pI=g.I}for(var dct=0,t1=0,x=g.I;x<g.ch.length;x++){var c=g.ch[x],WO=_p.gTabWO(c);if(_w-=WO.tW,t1=dct>0&&g.tb&&pL+WO.tW>g.L+g.W-g.tb.m.o.offsetWidth-g.L?1:0,g._a!=c){if(!(_w>0&&0==t1)){_p.minTabGrp(c,WO.tW+_w,pL),c._g.h=1,c._e.hd.tab.notif.o&&shE(c._e.hd.tab.notif.o);for(var y=x+1;y<g.ch.length;y++)_p.hideT(g,g.ch[y]),g.ch[y]._g.h=2,g._a==g.ch[y]&&(g._a=g.ch[x>0?x-1:0],g._a._g.h&&(g._a=g.ch[x]),_p.maxTabGrp(g._a,pL-pO));_w=-1;break}_p.minTabGrp(c,WO.tW,pL),c._g.h=0,dct+=1}else _w>0&&0==t1||c._g.i==g.I?(_p.maxTabGrp(c,pL),c._g.h=0,dct+=1):x>0&&0==g.ch[x-1]._g.h?(_p.minTabGrp(c,WO.tW+_w,pL),c._g.h=3,g._a=g.ch[x-1],_p.maxTabGrp(g._a,pL-pO)):(_p.maxTabGrp(c,pL),c._g.h=0,dct+=1);pL+=pO=WO.tW+_p.tSP,_w-=_p.tSP}if(g.ch.length!=dct){if(null==g.tb&&_p.atMenu(g),_cST(g.tb.m.o,"t",g.T),_cST(g.tb.m.o,"l",g.L+g.W-g.tb.m.o.offsetWidth),_w>0){var le,hn=g.ch[g.ch.length-1]._g.h,lI=0;if(0==hn||1==hn){for(var tbol=g.L+g.W-g.tb.m.o.offsetWidth-g.L,ol=g.tb.m.o.offsetLeft,_w=g.W-g.tb.m.o.offsetWidth,x=g.ch.length-1;x>=g.I;x--){var c,ow=(c=g.ch[x])._e.hd.tab.o.offsetWidth;if(ol-=ow,_w-ow+_p.tSP<=0)break;_w-=ow+_p.tSP,g._a!=c?_cST(c.o,"l",ol):_cST(c._e.hd.tab.o,"l",ol-g.L),_p.rnot(c),lI=x,ol-=_p.tSP}for(var x=lI-=1;x>=0;x--){var c=g.ch[x];if(_w>0){var to=c._e.hd.tab.o.offsetWidth,r=to;if(r>_w?(r=_w,c._g.h=3):c._g.h=0,ol-=r,_p.minTabGrp(c,r,ol-g.L),3==c._g.h&&(c._e.hd.tab.o.style.left=-(to-c.o.offsetWidth)+"px"),g._a==c&&_p.maxTabGrp(g._a,ol-g.L),_w-=r+_p.tSP,ol-=_p.tSP,_w<=0)break}}}}0==g.ch[0]._g.h?aCls(g.tb.m.l,"_nl_tabsLeftHide"):rCls(g.tb.m.l,"_nl_tabsLeftHide"),0==g.ch[g.ch.length-1]._g.h?aCls(g.tb.m.r,"_nl_tabsRightHide"):rCls(g.tb.m.r,"_nl_tabsRightHide")}else _p.rtMenu(g)},NavLayout.prototype.atMenu=function(g){var _p=this,_g=g,mnu=cElem(this.o,"div","_nl_tabsGroupToolBar",nlbx+"position:absolute;box-sizing:content-box;overflow:hidden;z-index:2;list-style-type:none;",""),lft=cElem(mnu,"li","_nl_tabsLeft","",""),rgt=cElem(mnu,"li","_nl_tabsRight","",""),drp=cElem(mnu,"li","_nl_tabsList","","");g.tb={m:{o:mnu,l:lft,r:rgt,d:drp},cb:function(e){var e,s=null;if((e=window.event||e).srcElement?s=e.srcElement:e.target&&(s=e.target),_nlM(s,"_nl_tabsList")){for(var cl="",y=0;y<_g.ch.length;y++){var c=_g.ch[y];cl+='<li><a href="#">'+(_g._a==c?"[ ":"")+c._e.hd.tab.o.children[0].children[0].innerHTML+(_g._a==c?" ] ":"")+"</a></li>"}_nl_rChilds(_p.tDrpDwn.o.children[0]),_p.tDrpDwn.o.children[0].insertAdjacentHTML("beforeend",cl),shE(_p.tDrpDwn.o,1),_cST(_p.tDrpDwn.o,"t",mnu.offsetTop),_cST(_p.tDrpDwn.o,"l",mnu.getBoundingClientRect().left-_p.rect.left+drp.offsetLeft+drp.offsetWidth/3-_p.tDrpDwn.o.children[0].offsetWidth/2),_p.tDrpDwn.gH=_g.ch,aCls(_p.tDrpDwn.o,"_nl_tabGroupList_show")}else _nlM(s,"_nl_tabsLeft")?_g.ch[0]._g.h&&(_g.I-=1,_p.utgG(_g)):_nlM(s,"_nl_tabsRight")&&_g.ch[_g.ch.length-1]._g.h&&(_g.I+=1,_p.utgG(_g));return _stp(e),!1}},alr(g.tb.m.o,"mousedown",g.tb.cb,!0)},NavLayout.prototype.rtMenu=function(g){g.tb&&(rlr(g.tb.m.o,"mousedown",g.tb.cb),this.o.removeChild(g.tb.m.o),delete g.tb,g.tb=null)},NavLayout.prototype.maxTabGrp=function(c,pL){_cST(c.o,"t",c.T),_cST(c._e.hd.tab.o,"l",pL),_cST(c.o,"l",c.L),_cST(c.o,"h",c.H),_cST(c.o,"w",c.W),_cST(c.o,"z",0),rItem(this,c),emitR(this,c),rCls(c._e.hd.tab.o,"_nl_tab_inactive"),this.rnot(c)},NavLayout.prototype.minTabGrp=function(c,tW,pL){_cST(c.o,"h",this.HS),_cST(c.o,"w",tW),_cST(c.o,"z",1),_cST(c._e.item,"h",0),_cST(c.o,"l",c.L+pL),_cST(c.o,"t",c.T),_cST(c._e.hd.tab.o,"l",0),this.rnot(c),aCls(c._e.hd.tab.o,"_nl_tab_inactive")},NavLayout.prototype.setTabWidth=function(c,f){_cST(c._e.hd.tab.o,"w",c._e.hd.tab.title.offsetWidth+c._e.hd.tab.ctl.o.offsetWidth)},NavLayout.prototype.hideT=function(g,c){c.o.style.zIndex=-1,c.o.style.top=-2*this.HS+"px",c._e.item&&(c._e.item.style.height=0);var n=c._e.hd.tab.notif.o;n&&shE(n)},NavLayout.prototype.gTabWO=function(c){return{tW:c._e.hd.tab.o.offsetWidth,cW:0}},NavLayout.prototype.frBrd=function(tab){tab._e.item.style.border="none",_cST(tab._e.item,"t",0),_cST(tab._e.item,"l",0),_cST(tab._e.item,"h",tab.H),_cST(tab._e.item,"w",tab.W)},NavLayout.prototype.mFloat=function(tab){if(tab.o.style.zIndex=4,tab._e.hd.tab.notif.o.style.zIndex=4,tab.ste=1,null==this.pOut&&(this.pOut=new _T),this.pOut.put(tab.o,tab),tab._e.hd.ctl.del(tab.po.o),tab.po.o=null,0==tab.fbrd&&this.frBrd(tab),1==tab.resz){var r=document.createElement("div");r.className="_nl_resize",r.style.cssText=nlbx+"float:right;position:absolute;cursor:nwse-resize;",tab.o.appendChild(r),tab.rz=r,_cST(r,"t",tab.H-r.offsetHeight),_cST(r,"l",tab.W-r.offsetWidth)}},NavLayout.prototype.addPopOut=function(rc,di){return rc._e.hd.ctl.add(di,'<li class="_nl_popout" title="open in new window" ></li>',function(ev,nl,tab,obj){nl.emit("popout",ev,tab),0==ev.defaultPrevented&&(1==tab.po.ty?nl.WinPop?nl.WinPop(ev,nl,tab,obj):alert("requires navlayout_popout_ext.js.."):(tab._g.o?nl.delTabGrp(tab):nl.detach(tab),tab.T+=tab.H/4,tab.L+=tab.W/4,tab.H==nl.H&&(tab.H=nl.H/2),tab.W==nl.W&&(tab.W=nl.W/2),nl.maxTabGrp(tab,0),nl.mFloat(tab)))})},NavLayout.prototype.addClose=function(rc,di){return rc._e.hd.ctl.add("end",'<li class="_nl_close" title="close" ></li>',function(ev,nl,tab,obj){nl.emit("close",ev,tab),0==ev.defaultPrevented&&nl.deleteTab(tab)})},NavLayout.prototype.addMaximize=function(rc,di){return rc._e.hd.ctl.add("end",'<li class="_nl_maximise" title="maximise" ></li>',function(ev,nl,tab,obj){if("_nl_maximise"==obj.className)nl.emit("maximize",ev,tab),0==ev.defaultPrevented&&(tab.o.style.zIndex=5,nl.mObj=tab,nl.mszC(),nl.mObj&&(obj.className="_nl_minimize",obj.title="minimize"),null!=tab.po.o&&tab._e.hd.ctl.del(tab.po.o),tab._g.o&&(tab._e.hd.tab.o.style.left="0px",shE(tab._e.hd.ctl.o,1)));else if("_nl_minimize"==obj.className&&(nl.emit("minimize",ev,tab),0==ev.defaultPrevented)){var e=tab.o;e.style.position="absolute",1==tab.ste?e.style.zIndex=4:e.style.zIndex=0,e.style.height=tab.H+"px",e.style.width=tab.W+"px",e.style.top=tab.T+"px",e.style.left=tab.L+"px",rItem(nl,tab),emitR(nl,tab),obj.className="_nl_maximise",obj.title="maximize",nl.mObj=null,null!=tab.po.o&&(tab.po.o=nl.addPopOut(tab,"start")),nl.rnot(tab),tab._g.o&&(shE(tab._e.hd.ctl.o),nl.utgG(tab._g.o))}})},NavLayout.prototype.getCtrls=function(_in,_A){var ctl={_r:this,_p:_in,_f:null,o:null,ctrl:[],add:function(p,n,_f){var _o=null,Q=this;if(Q._p._e.hd.tab.o.style.width="auto","start"==p){Q.o.insertAdjacentHTML("afterbegin",n);var c={o:_o=Q.o.children[0],f:_f},ct=Q.ctrl;ct.push(c);for(var x=ct.length-1;x>=0;x--)ct[x]=ct[x-1];ct[0]=c}else if("end"==p){Q.o.insertAdjacentHTML("beforeend",n);var c={o:_o=Q.o.children[Q.o.children.length-1],f:_f};Q.ctrl.push(c)}if(shE(Q.o,1),_nlM(Q.o,"_nl_tabControls")){if(Q._r.rnot(Q._p),Q._p._g.o){Q._p._g.o._a!=Q._p&&_cST(Q._p.o,"w",Q._p._e.hd.tab.o.offsetWidth+Q._p._e.hd.tab.ctl.o.offsetWidth),Q._r.setTabWidth(Q._p);var nl=Q._r,tab=Q._p;setTimeout(function(){nl.utgG(tab._g.o,1)},10)}}else _nlM(Q.o,"_nl_headerControls")&&Q._p._g.o?shE(Q.o):_nlM(Q.o,"_nl_notif")&&Q._r.rnot(Q._p);return _o},del:function(_o_){var Q=this;Q._p._e.hd.tab.o.style.width="auto";for(var x=0;x<Q.ctrl.length;x++){var c=Q.ctrl[x];if(c.o==_o_){Q.o.removeChild(c.o);for(var y=x;y<Q.ctrl.length;y++)Q.ctrl[y]=Q.ctrl[y+1];if(Q.ctrl.pop(),0==Q.ctrl.length&&shE(Q.o),_nlM(Q.o,"_nl_tabControls")&&Q._p._g.o){Q._p._g.o._a!=Q._p&&_cST(Q._p.o,"w",Q._p._e.hd.tab.o.offsetWidth+Q._p._e.hd.tab.ctl.o.offsetWidth),Q._r.setTabWidth(Q._p);var nl=Q._r,tab=Q._p;setTimeout(function(){nl.utgG(tab._g.o,1)},10)}break}}}};return 1==_A&&(ctl._r.o.insertAdjacentHTML("beforeend",'<div class="_nl_notif" style="position:fixed;visibility:hidden;z-Index:3;top:'+(ctl._r.rect.top+ctl._p.o.offsetTop-ctl._r.HS)+"px;left:"+(ctl._r.rect.left+ctl._p.o.offsetLeft+ctl._p._e.hd.tab.o.offsetWidth)+'px;"></div>'),ctl.o=ctl._r.o.children[ctl._r.o.children.length-1],ctl._f=function(e){var e,touches=(e=window.event||e).touches||e.targetTouches;touches&&(e.clientX=touches[0].pageX,e.clientY=touches[0].pageY),chkDef(e);var s=null;if(e.srcElement?s=e.srcElement:e.target&&(s=e.target),_nlM(s.parentNode,"_nl_notif"))for(var x=0;x<ctl._p._e.hd.tab.notif.ctrl.length;x++){var c=ctl._p._e.hd.tab.notif.ctrl[x];if(c.o==s){c.f(e,this,ctl._p);break}}return _stp(e),!1},alr(ctl.o,"touchstart",ctl._f,!0),alr(ctl.o,"mousedown",ctl._f,!0)),ctl},NavLayout.prototype.createTab=function(_s,_t,_l,_h,_w){var rc={name:_s.name,type:"T",o:null,_e:{hd:{o:null,tab:{o:null,title:null,notif:null,ctl:null},ctl:null},item:null},H:0,W:0,T:0,L:0,s:null,pt:null,sg:0,mz:"window"==_s.maximize?1:0,po:{ty:_s.popout?"window"==_s.popout?1:0:null,o:null},ste:0,wd:0,rz:null,dck:1,resz:1,fbrd:1,_g:{o:null,i:-1,h:0,l:0,w:0,ct:null},EvReg:[],uData:{}};_s.type&&"widget"==_s.type&&(rc.wd=1),"float"==_s.dock&&(rc.ste=1),0==_s.dockable&&(rc.dck=0),0==_s.resizable&&(rc.resz=0),0==_s.widgetFloatBorder&&(rc.fbrd=0);var lce=cElem(this.o,"div","_nl "+_s.name,nlbx+_nl_OF+"position:absolute;z-Index:0;border:0;"+_bp+"display:block;top:"+_t+"px;left:"+_l+"px;height:"+_h+"px;width:"+_w+"px;",""),header=cElem(lce,"div","_nl_header",nlbx+"position:static;"+_bp+"top:0;left:0;display:block;"+(0==rc.wd?"":_bp+"border:0;box-shadow:none;background:transparent;")+"height:"+this.HS+"px;",""),tab=cElem(header,"div",0==rc.wd?"_nl_tab":"_nl_widget",nlbx+"overflow:visible;max-height:"+this.tbh+'px;width:auto;text-align:center;list-style-type:none;position:absolute;z-index:2;top:0;left:0;"',""),_th,title=cElem(cElem(tab,"div","_nl_ttW",nlbx+"position:relative;float:left;",""),"span","_nl_title",nlbx+"position:relative;",_s.title),_tc,tCtrl=cElem(cElem(tab,"div","_nl_tCW",nlbx+"position:relative;float:left;",""),"div","_nl_tabControls",nlbx+_nl_OF+"visibility:hidden;position:relative;",""),hCtrl=cElem(header,"div",0==rc.wd?"_nl_headerControls":"_nl_headerControlsWidget",nlbx+_nl_OF+"z-index:1;visibility:hidden;list-style-type:none;",""),item=null;return 0==rc.wd?item=cElem(lce,"div","_nl_item",nlbx+_nl_OF+"position:relative;"+_bp+"left:0;height:"+(_h-this._ibz)+"px;",""):0==rc.fbrd&&1==rc.ste?(item=cElem(lce,"div","_nl_item",nlbx+_nl_OF+"position:absolute;"+_bp+"top:0;left:0;height:"+_h+"px;width:"+_w+"px;","")).style.border="none":item=cElem(lce,"div","_nl_item",nlbx+_nl_OF+"position:absolute;"+_bp+"top:0;left:0;height:"+(_h-this.ibh)+"px;width:"+(_w-this.ibw)+"px;",""),_s.body&&item.insertAdjacentHTML("beforeend",_s.body),this.o.appendChild(lce),rc.o=lce,rc._e.item=item,rc._e.hd.o=header,rc._e.hd.tab.o=tab,rc._e.hd.tab.notif=this.getCtrls(rc,1),rc._e.hd.tab.title=title,rc._e.hd.tab.ctl=this.getCtrls(rc,0),rc._e.hd.tab.ctl.o=tCtrl,rc._e.hd.ctl=this.getCtrls(rc,0),rc._e.hd.ctl.o=hCtrl,rc.H=_h,rc.W=_w,rc.T=_t,rc.L=_l,null!=rc.po.ty&&(rc.po.o=this.addPopOut(rc,"end")),_s.maximize&&this.addMaximize(rc,"end"),_s.close&&this.addClose(rc,"end"),1==rc.wd&&this.mkWdgt(rc),_s.tooltip&&tab.setAttribute("data-title",_s.tooltip),this._nlDG(rc,rc.o),this._RC.put(rc.o,rc),rc},NavLayout.prototype.deleteTab=function(t){if("string"==typeof t&&(t=this.getTab(t)),null!=t){var e=t.o;this.mObj==t&&(this.mObj=null),this.detach(t),this._RC.remove(e);for(var x=0;x<t.EvReg.length;x++)rlr(t.o,t.EvReg[x].type,t.EvReg[x].callback);t._e.hd.tab.notif._f&&(rlr(t._e.hd.tab.notif.o,"touchstart",t._e.hd.tab.notif._f),rlr(t._e.hd.tab.notif.o,"mousedown",t._e.hd.tab.notif._f),e.parentNode.removeChild(t._e.hd.tab.notif.o)),delete t._e.hd.tab.notif,delete t._e.hd.tab.ctl,delete t._e.hd.ctl,e.parentNode.removeChild(e),this.emit("tabDeleted",t),delete t._e,delete t.EvReg}},NavLayout.prototype.getTab=function(n){for(var i=0;i++<this._RC.size;this._RC.next())if(this._RC.value().name==n)return this._RC.value();return null},NavLayout.prototype.mkWdgt=function(e){if(e&&e._e&&e._e.hd){var h=e._e.hd;shE(h.tab.o),shE(h.ctl.o)}},NavLayout.prototype._nlDG=function(rc,_e){var _p=this,func,oEv,oEv;alr(_e,(oEv={type:"touchstart",callback:func=function(e){if(!_p.mE.drg){var e,touches=(e=window.event||e).touches||e.targetTouches;touches&&(e.clientX=touches[0].pageX,e.clientY=touches[0].pageY),_p.mE.e=e,_p.eDWM(e),chkDef(e);var s=null;if(e.srcElement?s=e.srcElement:e.target&&(s=e.target),_nlM(s,"_nl_sp")){_nlM(s,"_nl_spa")&&(s=s.parentNode);var o,ok=0;if(!(o=_p._RC.get(s)))return!1;if(_p.rect=_p.o.getBoundingClientRect(),"H"==o.type){if(_p.emit("hSplitterDragStart",e,o),0==e.defaultPrevented){ok=1,_p.o.style.cursor="ns-resize";var a=_p.spX[0],b=_p.spX[1],tp=o.T+_p.B/2,npos;_cST(a,"z",10),shE(a,1),_cST(b,"z",10),shE(b,1),_cST(a,"t",tp-a.offsetHeight/2),_cST(b,"t",tp-b.offsetHeight/2),_cST(a,"l",(npos=e.clientX-_p.rect.left)-_p.spMD-a.offsetWidth),_cST(b,"l",npos+_p.spMD)}}else if("V"==o.type&&(_p.emit("vSplitterDragStart",e,o),0==e.defaultPrevented)){ok=1,_p.o.style.cursor="ew-resize";var a=_p.spY[0],b=_p.spY[1],tp=o.L+_p.B/2,npos;_cST(a,"z",10),shE(a,1),_cST(b,"z",10),shE(b,1),_cST(a,"l",tp-a.offsetWidth/2),_cST(b,"l",tp-b.offsetWidth/2),_cST(a,"t",(npos=e.clientY-_p.rect.top)-_p.spMD-a.offsetHeight),_cST(b,"t",npos+_p.spMD)}ok?(aCls(o.o,"_nl_sp_active"),_p.mE.dwn=1,_p.mE.cSP=o):_cST(o.o,"z",0)}else if(_nlM(s,"_nl_resize")){var o;if(!(o=_p._RC.get(_e))||0==o.resz)return!1;_p.emit("floatingWindowResize",e,o),0==e.defaultPrevented&&(_p.mE._dE=_e,_p.mE.dwn=1,_p.mE.drg=null,_p.mE.rsz=[o,s,_e.getBoundingClientRect(),o._e.hd.tab.o.offsetWidth])}else if(_nlM(s.parentNode,"_nl_headerControls"))for(var o=_p._RC.get(_e),x=0;x<o._e.hd.ctl.ctrl.length;x++){var c;if((c=o._e.hd.ctl.ctrl[x]).o==s){c.f(e,_p,o,s);break}}else if(_nlM(s.parentNode,"_nl_tabControls"))for(var o=_p._RC.get(_e),x=0;x<o._e.hd.tab.ctl.ctrl.length;x++){var c;if((c=o._e.hd.tab.ctl.ctrl[x]).o==s){c.f(e,_p,o,s);break}}else{if(_p.mObj&&_p.mObj.o==_e)return;var c=0,o;if((o=_p._RC.get(_e))&&(0==o.ste||0==o.wd)&&e.clientY-_p.rect.top>o.T+_p.HS)return;if(1==o.wd&&null==o._g.o){if(e.clientX-_p.rect.left>o.L+o._e.hd.tab.o.offsetWidth){if(0==o.ste)return;1==o.ste&&(c=1)}e.clientY-_p.rect.top>o.T+_p.HS&&(c=1)}if("_nl_header"==s.className||_nlM(s,"_nl ")){if(0==o.ste)return;c=1}_p.rect=_p.o.getBoundingClientRect(),0==o.dck&&(c=1);var sX=e.clientX-_p.rect.left-_e.offsetLeft-_e.children[0].children[0].offsetLeft;if(_p.mE.drg={clientX:e.clientX,clientY:e.clientY,startX:sX,startY:e.clientY-_p.rect.top-_e.offsetTop,Sel:c},_p.mE._dE=_e,_e.focus(),o._g.o&&(o._g.i>0&&1!=o._g.h&&3!=o._g.h||(o._g.o.I=o._g.i),o._g.o._a=o,_p.utgG(o._g.o)),c)_p.mE.dwn=1;else{function _drg(){_p.mE.dwn=1;var a=_p.uLck;_cST(a,"t",o.T?o.T:o.T+_p.HS),_cST(a,"z",5),_cST(a,"l",o._e.hd.tab.o.offsetLeft),shE(a,1);var _sp=o.L+o._e.hd.tab.o.offsetLeft,_ep=_sp+o._e.hd.tab.o.offsetWidth-a.offsetWidth,_dr=1,_lf=0;_lf=_sp,_p.mE._dT=setInterval(function(){var a=_p.uLck;(_lf+=_p.aniJ*_dr)>=_ep?_dr=-1:_lf<=_sp&&(_dr=1),_cST(a,"l",_lf)},_p.aniS)}_p.dLockT>0?_p.mE._dT=setTimeout(function(){_drg()},_p.dLockT):_drg()}}return _stp(e),!1}}}).type,oEv.callback,!0),rc.EvReg.push(oEv),alr(_e,(oEv={type:"mousedown",callback:func}).type,oEv.callback,!0),rc.EvReg.push(oEv);var func=function(e){var e=window.event||e,o=_p._RC.get(_e);if(_p.mE.dwn)o!=_p.mE.dob&&"splitter"!=o.name&&(_p.mE.laT=o);else if(o!=_p.mE.laT){var w=_p.mE.laT;w&&("H"==w.type?(w.o.style.zIndex=0,_p.emit("hSplitterFocusOut",w)):"V"==w.type?(w.o.style.zIndex=0,_p.emit("vSplitterFocusOut",w)):"T"==w.type&&(w._e&&(1==w.wd&&null==w._g.o?(shE(w._e.hd.tab.o),shE(w._e.hd.ctl.o),rCls(w._e.hd.tab.o,"_nl_widget_hover")):rCls(w._e.hd.tab.o,"_nl_tab_hover"),_p.emit("tabFocusOut",w)),1==w.ste&&w.rz&&shE(w.rz))),o&&(_p.mE.laT=o,"H"==o.type?(_e.style.zIndex=6,_p.emit("hSplitterFocusIn",o)):"V"==o.type?(_e.style.zIndex=6,_p.emit("vSplitterFocusIn",o)):"T"==o.type&&o._e.hd.tab.o&&(1==o.wd&&null==o._g.o?(shE(o._e.hd.tab.o,1),shE(o._e.hd.ctl.o,1),aCls(o._e.hd.tab.o,"_nl_widget_hover")):aCls(o._e.hd.tab.o,"_nl_tab_hover"),_p.emit("tabFocusIn",o),1==o.ste&&o.rz&&shE(o.rz,1)))}},oEv,oEv,oEv;alr(_e,(oEv={type:"touchmove",callback:func}).type,oEv.callback,!0),rc.EvReg.push(oEv),alr(_e,(oEv={type:"mousemove",callback:func}).type,oEv.callback,!0),rc.EvReg.push(oEv),alr(_e,(oEv={type:"touchend",callback:function(e){_p.mUP()}}).type,oEv.callback,!0),rc.EvReg.push(oEv)},NavLayout.prototype.AttachMouseEvents=function(){var _p=this,func=function(e){var e,touches=(e=window.event||e).touches||e.targetTouches;if(touches&&(e.clientX=touches[0].pageX,e.clientY=touches[0].pageY),_p.mE.eX=e.clientX,_p.mE.eY=e.clientY,e.defaultPrevented||(e.defaultPrevented=!1,e.preventDefault=function preventDefault(){e.defaultPrevented=!0}),0==_p.mE.dwn)return!0;var _e=_p.mE._dE;if(_p.mE.drg){if(_p.mE.drg.clientY-e.clientY==0||_p.mE.drg.clientX-e.clientX==0)return;if(!_p.mE.dob){_p.mE.dob=_p._RC.get(_e);var o=_p.mE.dob;if(_p.emit("dragStart",e,o),0==_p.mE.drg.Sel){var a,levX,levY;function _chk_drg(levX,levY){_p.mE.eY!=levY&&_p.mE.eX!=levX||_p.dock(),levX=_p.mE.eX,levY=_p.mE.eY,_p.mE.eTimer=setTimeout(function(){_chk_drg(levX,levY)},120)}_p.mE._dT&&(clearTimeout(_p.mE._dT),_p.mE._dT=null,shE(_p.uLck)),0==o.ste?(_cST(_e,"w",2*o._e.hd.tab.o.offsetWidth),o._e.hd.tab.o.style.width="auto",_p.detach(o)):(0==o.fbrd&&(o._e.item.style.border=null),null!=o.po.ty&&(o.po.o=_p.addPopOut(o,"start"))),o.ste=0,shE(o._e.hd.ctl.o),o.rz&&(o.o.removeChild(o.rz),o.rz=null),_p.o.style.cursor="move",_cST(_e.children[0].children[0],"l",0),_e.style.zIndex=5,_e.style.height=_p.HS+"px",_e.style.width=o._e.hd.tab.o.offsetWidth+"px",_cST(a=_p.tMove,"h",_p.HS+_p.tmH),_cST(a,"w",o._e.hd.tab.o.offsetWidth+_p.tmH),_cST(a,"z",2),shE(a,1),_chk_drg(e.clientX,e.clientY)}o._e.item.visibility="hidden",shE(o._e.hd.tab.notif.o)}var top=0,left=0;0==_p.mE.dob.ste?(top=_p.mE.eY-_p.rect.top+4,left=_p.mE.eX-_p.rect.left+10):(top=_p.mE.eY-_p.rect.top-_p.mE.drg.startY,left=_p.mE.eX-_p.rect.left-_p.mE.drg.startX);var t=Math.max(0,top),l=Math.max(0,left)-0;_p.mE.dob.T=t,_p.mE.dob.L=l,_e.style.top=t+"px",_e.style.left=l+"px",_cST(_p.tMove,"t",t-_p.tmH/2),_cST(_p.tMove,"l",l-_p.tmH/2)}else if(_p.mE.cSP){if("H"==_p.mE.cSP.type){var npos=e.clientY-_p.o.offsetTop-_p.mE.cSP.o.offsetHeight;if(npos+=_p.o.offsetTop+_p.B/2,(npos-=_p.rect.top)>=_p.mE.cSP.s.S&&npos<=_p.mE.cSP.s.E-_p.B){_cST(_p.mE.cSP.o,"t",npos-_p.d4);var a=_p.spX[0],b=_p.spX[1],tp,npos;_cST(a,"t",(tp=npos-_p.d4+_p.B/2)-a.offsetHeight/2),_cST(b,"t",tp-b.offsetHeight/2),_cST(a,"l",(npos=e.clientX-_p.rect.left)-_p.spMD-a.offsetWidth),_cST(b,"l",npos+_p.spMD)}}else if("V"==_p.mE.cSP.type){var npos;if((npos=e.clientX-_p.rect.left)>=_p.mE.cSP.s.S&&npos<=_p.mE.cSP.s.E+_p.mE.cSP.o.offsetWidth){_cST(_p.mE.cSP.o,"l",npos-_p.B/2+_p.d4);var a=_p.spY[0],b=_p.spY[1],tp,npos;_cST(a,"l",(tp=npos-_p.B/2+_p.B/2)-a.offsetWidth/2),_cST(b,"l",tp-b.offsetWidth/2),_cST(a,"t",(npos=e.clientY-_p.rect.top)-_p.spMD-a.offsetHeight),_cST(b,"t",npos+_p.spMD)}}}else if(_p.mE.rsz&&(_p.emit("floatingWindowResize",e,_p.mE.rsz[0]),0==e.defaultPrevented)){var p=_p.mE.rsz[0],r=_p.mE.rsz[1],h=e.clientY-_p.mE.rsz[2].top+10,w=e.clientX-_p.mE.rsz[2].left+10;if(h-_p._ibz<0|w<_p.mE.rsz[3])return _stp(e),!1;p.H=h,p.W=w,_e.style.height=p.H+"px",_e.style.width=p.W+"px",rItem(_p,p),emitR(_p,p)}return touches&&e?(_stp(e),!0):void 0},oEv={obj:this.o,type:"touchmove",callback:func};alr(this.o,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={obj:this.o,type:"mousemove",callback:func};alr(this.o,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={obj:this.o,type:"losecapture",callback:function(){_p.mUP()}};alr(this.o,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={type:"touchend",callback:function(){_p.mUP()}};alr(this.o,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={type:"mouseup",callback:function(){_p.mUP()}};alr(this.o,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={obj:document,type:"touchend",callback:function(e){_p.mUP()}};alr(document,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={obj:document,type:"mouseup",callback:function(e){_p.mUP()}};alr(document,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={obj:document,type:"touchstart",callback:function(e){var e=window.event||e;_p.eDWM(e)}};alr(document,oEv.type,oEv.callback,!1),this.EvReg.push(oEv);var oEv={obj:document,type:"mousedown",callback:function(e){var e=window.event||e;_p.eDWM(e)}};alr(document,oEv.type,oEv.callback,!1),this.EvReg.push(oEv)},NavLayout.prototype.eDWM=function(e){var _p=this;if(_p.tDrpDwn.gH&&"hidden"!=_p.tDrpDwn.o.style.visibility&&(_nl_rChilds(_p.tDrpDwn.o.children[0]),_p.tDrpDwn.gH=null,shE(_p.tDrpDwn.o),rCls(_p.tDrpDwn.o,"_nl_tabGroupList_show")),_p.tgHdrCtrl.tab.o){for(var fl=_p.tgHdrCtrl.tab.l.length,x=0;x<fl;x++)_p.tgHdrCtrl.tab.l.pop();_p.tgHdrCtrl.tab.o=null,_nl_rChilds(_p.tgHdrCtrl.o),shE(_p.tgHdrCtrl.o),rCls(_p.tgHdrCtrl.o,"_nl_tabGroupHdrCtrlsList_show")}},NavLayout.prototype.rnot=function(e){if(e&&e._e&&e._e.hd&&e._e.hd.tab.notif&&e._e.hd.tab.notif.o){var n=e._e.hd.tab.notif.o;0==n.children.length?shE(n):(shE(n,1),1==e.ste?n.style.zIndex=e.o.style.zIndex:n.style.zIndex=3,n.style.top=this.rect.top+e.o.offsetTop-this.HS+"px",n.style.left=this.rect.left+e.o.offsetLeft+e._e.hd.tab.o.offsetLeft+e._e.hd.tab.o.offsetWidth+"px")}},NavLayout.prototype.mUP=function(event,listener){var _p=this,o;if(_p.mE._dT&&(clearTimeout(_p.mE._dT),_p.mE._dT=null,shE(_p.uLck)),_p.mE.eTimer&&(clearTimeout(_p.mE.eTimer),_p.mE.eTimer=null),_p.mE.ldT.o&&(_p.mE.ldT.o._g.o?this.utgG(_p.mE.ldT.o._g.o):(_cST(_p.mE.ldT.o._e.hd.tab.o,"l",0),this.rnot(_p.mE.ldT.o)),_p.mE.ldT.X=0,_p.mE.ldT.Y=0),shE(this.dArea),rCls(this.dArea,"_nl_dockTab"),rCls(this.dArea,"_nl_dockHeader"),_cST(this.dArea,"z",0),_p.mE.drg)(o=_p.mE.dob)&&(_p.mE._dE.releaseCapture&&_p.mE._dE.releaseCapture(),_p.rnot(o),_p.mE._dE.style.position="absolute",1==o.ste?_p.mE._dE.style.zIndex=4:(_p.mE._dE.style.zIndex=0,this.attach(_p.mE.ldT.R?null:_p.mE.ldT.o,o,_p.mE.ldT.D),_p.mE.ldT.o=null,_p.mE.ldT.D=""),_p.emit("dragEnd",o.name,o._e),o._e.hd.ctl.ctrl.length?shE(o._e.hd.ctl.o,1):shE(o._e.hd.ctl.o));else if(_p.mE.cSP){var o=_p.mE.cSP;_p.resize(o,"H"==o.type?parseFloat(o.o.style.top.replace("px",""))-_p.d4:parseFloat(o.o.style.left.replace("px",""))-_p.d4),"H"==_p.mE.cSP.type?_p.emit("hSplitterDragEnd",_p.mE.cSP.o):"V"==_p.mE.cSP.type&&_p.emit("vSplitterDragEnd",_p.mE.cSP.o),rCls(_p.mE.cSP.o,"_nl_sp_active"),_p.mE.cSP=null}document.releaseCapture&&document.releaseCapture(),_cST(_p.tMove,"z",0),shE(_p.tMove);for(var i=0;i<2;i++)shE(_p.spX[i]),shE(_p.spY[i]);_p.o.style.cursor="default",_p.mE._dE=null,_p.mE.drg=null,_p.mE.dob=null,_p.mE.cSP=null,_p.mE.dwn=0},NavLayout.prototype.on=function(event,listener){"object"!=typeof this.events[event]&&(this.events[event]=[]),this.events[event].push(listener)},NavLayout.prototype.emit=function(event){var i,listeners,length,args=[].slice.call(arguments,1);if("object"==typeof this.events[event])for(length=(listeners=this.events[event].slice()).length,i=0;i<length;i++)listeners[i].apply(this,args)},NavLayout.prototype.eRSZ=function(el,OH,OW,NH,NW,OT,OL,NT,NL,SZ,sg){if(el.sg!=sg){el.sg=sg;var _p=this;if("H"==el.type){var a,b,c,d,e=(d=NH-SZ)*(c=100*(a=el.s.E-el.s.S-_p.B)/(b=OH-SZ))/100;e+=_p.B;var osb=el.s.S,oeb=el.s.E,otp=el.T,olt=el.L,spos=_p.B*el.s.id,k;k=(NH-SZ)*(k=100*(el.s.S-OT-spos)/(OH-SZ))/100,el.s.S=NT+k+spos,el.s.E=el.s.S+e;var t=100*(el.T-osb)/(oeb-osb-_p.B),tp=(e-_p.B)*t/100;if(el.T=el.s.S+tp,_cST(el.o,"t",el.T+_p.d4),el.W=NW,_cST(el.o,"w",NW-_p.d2),el.L=NL,_cST(el.o,"l",NL),el.s&&el.s.P)for(var i=0;i++<el.s.P.size;el.s.P.next())_p.eRSZ(el.s.P.value(),otp-osb,OW,el.T-el.s.S,NW,osb,olt,el.s.S,el.L,el.s.P.size*_p.B,sg);if(el.s&&el.s.N)for(var i=0;i++<el.s.N.size;el.s.N.next())_p.eRSZ(el.s.N.value(),oeb-(otp+_p.B),OW,el.s.E-(el.T+_p.B),NW,otp+_p.B,olt,el.T+_p.B,el.L,el.s.N.size*_p.B,sg)}else if("V"==el.type){var a,b,c,d,e=(d=NW-SZ)*(c=100*(a=el.s.E-el.s.S-_p.B)/(b=OW-SZ))/100;e+=_p.B;var osb=el.s.S,oeb=el.s.E,otp=el.T,olt=el.L,spos=_p.B*el.s.id,k;k=(NW-SZ)*(k=100*(el.s.S-OL-spos)/(OW-SZ))/100,el.s.S=NL+k+spos,el.s.E=el.s.S+e;var t=100*(el.L-osb)/(oeb-osb-_p.B),tp=(e-_p.B)*t/100;if(el.L=el.s.S+tp,_cST(el.o,"l",el.L+_p.d4),el.H=NH,_cST(el.o,"h",NH-_p.d2),el.T=NT,_cST(el.o,"t",NT),el.s&&el.s.P)for(var i=0;i++<el.s.P.size;el.s.P.next())_p.eRSZ(el.s.P.value(),OH,olt-osb,NH,el.L-el.s.S,otp,olt,el.T,el.s.S,el.s.P.size*_p.B,sg);if(el.s&&el.s.N)for(var i=0;i++<el.s.N.size;el.s.N.next())_p.eRSZ(el.s.N.value(),OH,oeb-(olt+_p.B),NH,el.s.E-(el.L+_p.B),otp,olt+_p.B,el.T,el.L+_p.B,el.s.N.size*_p.B,sg)}else el.L=NL,el.T=NT,el.H=NH,el.W=NW,"T"==el.type?_p.mObj!=el&&(_cST(el.o,"h",NH),_cST(el.o,"w",NW),_cST(el.o,"t",NT),_cST(el.o,"l",NL),rItem(_p,el),_p.rnot(el),emitR(_p,el)):"G"==el.type&&_p.utgG(el)}},NavLayout.prototype.resize=function(o,pos){if(o){var _p=this;if("H"==o.type){var NT=pos,osb=o.s.S,oeb=o.s.E,otp=o.T;if(o.T=NT,_p.sg+=1,o.s&&o.s.P)for(var i=0;i++<o.s.P.size;o.s.P.next())_p.eRSZ(o.s.P.value(),otp-osb,o.W,o.T-o.s.S,o.W,otp,o.L,o.s.S,o.L,o.s.P.size*_p.B,_p.sg);if(o.s&&o.s.N)for(var i=0;i++<o.s.N.size;o.s.N.next())_p.eRSZ(o.s.N.value(),oeb-(otp+_p.B),o.W,o.s.E-(o.T+_p.B),o.W,otp+_p.B,o.L,o.T+_p.B,o.L,o.s.N.size*_p.B,_p.sg);if(o.pt&&o.pt.size>0)for(var p=o.pt,i=0;i++<p.size;p.next()){var a,c=null;if("H"==(a=p.value()).type?c=o.T<a.T?a.s.P:a.s.N:"V"==a.type&&(c=o.L<a.L?a.s.P:a.s.N),c)for(var j=0;j++<c.size;c.next()){var pK;(pK=c.value()).s.id+1==o.s.id?pK.s.E=o.T:pK.s.id-1==o.s.id&&(pK.s.S=o.T+_p.B)}}else for(var p=_p._RT,i=0;i++<p.size;p.next()){var pK;(pK=p.value()).s.id+1==o.s.id?pK.s.E=o.T:pK.s.id-1==o.s.id&&(pK.s.S=o.T+_p.B)}}else if("V"==o.type){var NL=pos,osb=o.s.S,oeb=o.s.E,olt=o.L;if(o.L=NL,_p.sg+=1,o.s&&o.s.P)for(var i=0;i++<o.s.P.size;o.s.P.next())_p.eRSZ(o.s.P.value(),o.H,olt-osb,o.H,o.L-o.s.S,o.T,olt,o.T,o.s.S,o.s.P.size*_p.B,_p.sg);if(o.s&&o.s.N)for(var i=0;i++<o.s.N.size;o.s.N.next())_p.eRSZ(o.s.N.value(),o.H,oeb-(olt+_p.B),o.H,o.s.E-(o.L+_p.B),o.T,olt+_p.B,o.T,o.L+_p.B,o.s.N.size*_p.B,_p.sg);if(o.pt&&o.pt.size>0)for(var p=o.pt,i=0;i++<p.size;p.next()){var a,c=null;if("H"==(a=p.value()).type?c=o.T<a.T?a.s.P:a.s.N:"V"==a.type&&(c=o.L<a.L?a.s.P:a.s.N),c)for(var j=0;j++<c.size;c.next()){var pK;(pK=c.value()).s.id+1==o.s.id?pK.s.E=o.L:pK.s.id-1==o.s.id&&(pK.s.S=o.L+_p.B)}}else for(var p=_p._RT,i=0;i++<p.size;p.next()){var pK;(pK=p.value()).s.id+1==o.s.id?pK.s.E=o.L:pK.s.id-1==o.s.id&&(pK.s.S=o.L+_p.B)}}}},NavLayout.prototype.mszC=function(){var _p=this;if(_p.mObj){var _e=_p.mObj.o;_e.style.position="fixed";var zi=5,r=null;1==_p.mObj.mz?(r=document.body.getBoundingClientRect(),zi=9999):r=_p.o.getBoundingClientRect(),_cST(_e,"z",zi),_cST(_e,"h",r.bottom-r.top),_cST(_e,"w",r.right-r.left),_cST(_e,"t",r.top),_cST(_e,"l",r.left),0==_p.mObj.wd?_cST(_p.mObj._e.item,"h",r.bottom-r.top-_p._ibz):(_cST(_p.mObj._e.item,"h",r.bottom-r.top),_cST(_p.mObj._e.item,"w",r.right-r.left)),emitR(_p,_p.mObj);var n=_p.mObj._e.hd.tab.notif.o;n.style.zIndex=zi+1,n.style.top=_p.mObj.o.offsetTop-_p.HS+"px",n.style.left=_p.mObj.o.offsetLeft+_p.mObj._e.hd.tab.o.offsetWidth+"px"}},NavLayout.prototype._add=function(p,c,u,sid,g){if(0==g&&u&&("H"==c.type||"V"==c.type)&&sid>-1)for(var i=0;i++<p.size;p.next()){var b=p.value();if(b.type&&b.type==c.type&&b.s.id>=sid){var pid=b.s.id;b.s.id=b.s.id+u}}p.put(c.o,c)},NavLayout.prototype.dock=function(){var _p=this,top=_p.mE.eY-_p.rect.top,left=_p.mE.eX-_p.rect.left,rdis=0,D="@";(_p._RT.size>1||1==_p._RT.size&&("H"==_p._RT.value().type||"V"==_p._RT.value().type))&&(top<5?(rdis=1,D="RU"):top>_p.H-10?(rdis=1,D="RD",console.log("top: "+top+", left: "+left+" => root : DOWN")):left<10?(rdis=1,D="CL"):left>_p.W-10&&(rdis=1,D="CR"));var o=_p.mE.laT,hdr=0;if(0==rdis){if(null==o||1==o.ste)return;if("splitter"==o.name)return void shE(_p.dArea)}if(1==rdis||o!=_p.mE.dob){var d2;if(0==rdis)if(_p.mE.ldT.o&&o!=_p.mE.ldT.o&&(_p.mE.ldT.o._g.o?_p.utgG(_p.mE.ldT.o._g.o):(_cST(_p.mE.ldT.o._e.hd.tab.o,"l",0),_p.rnot(_p.mE.ldT.o)),_p.mE.ldT.o=_p.mE.laT,_p.mE.ldT.D=""),top<o.T+_p.HS)(d2=left-_p.mE.ldT.X)<0?D="HL":d2>0&&(D="HR");else if(o!=_p.mE.ldT.o){_p.mE.ldT.D="";var Y=o.T+_p.HS+(o.H-_p.HS)/2,X1=o.L+o.W/3.5,X2=o.L+(o.W-o.W/3.5);D=left<X1?"CL":left>X2?"CR":top<Y?"RU":"RD"}else{var d1=top-_p.mE.ldT.Y,d2;if(d1!=(d2=left-_p.mE.ldT.X)){var r=d1,c=d2;d1<0&&(r=-1*d1),d2<0&&(c=-1*d2),r>c||d1>=d2&&d2>=0?D=d1<0?"RU":"RD":d2<0?D="CL":d2>0&&(D="CR")}}if(_p.mE.ldT.R!=rdis||_p.mE.ldT.D!=D){var h=0,w=0,t=o.o.offsetTop,l=o.o.offsetLeft;if(0==rdis)if("HL"==D||"HR"==D){if(hdr=1,o._g.o){if(_p.mE.ldT.hE==o&&_p.mE.ldT.t<top&&_p.mE.ldT.t+_p.mE.ldT.h>top&&_p.mE.ldT.l<left&&_p.mE.ldT.l+_p.mE.ldT.w>left)return _p.mE.ldT.X=left,void(_p.mE.ldT.Y=top);_p.utgG(o._g.o),0==o._g.i?D="HR":o._g.h&&(o._g.i<o._g.o.I&&(D="HR"),o._g.i>o._g.o.I&&(D="HL"))}if(h=o._e.hd.tab.o.offsetHeight,w=_p.mE.dob.o.offsetWidth,_p.mE.ldT.fE=null,"HL"==D)if(o._g.o){var g,io=(g=o._g.o)._a==o?o._g.o.L+o._e.hd.tab.o.offsetLeft:o.o.offsetLeft,_w=io;l=_w-=w+_p.tSP;for(var x=o._g.i-1;x>=0;x--){var z=null,ow=0,gl=0,q=0,c,u;if((_w-=(u=(c=g.ch[x])._e.hd.tab.o.offsetWidth)+_p.tSP)<g.L&&(q=1),null==_p.mE.ldT.fE&&(_p.mE.ldT.fE=c),g._a==c?(z=c._e.hd.tab.o,ow=_w-g.L,gl=0):(z=c.o,ow=_w,gl=g.L),q?ow+u>gl?(z==c.o?(z.style.left=gl+"px",c._e.hd.tab.o.style.left=-(gl-ow)+"px",z.style.width=u-(gl-ow)-_p.tSP+"px"):z.style.left=-(g.L-_w)+"px",_p.rnot(c)):(z==c.o?z.style.width="0":c._e.hd.tab.o.style.left=-(g.L-u)+"px",shE(c._e.hd.tab.notif.o)):z.style.left=ow+"px",c._g.h)break}l<g.L&&(w=io-g.L-_p.tSP,l=g.L),_p.mE.ldT.hE=o}else l+=o._e.hd.tab.o.offsetLeft,_cST(o._e.hd.tab.o,"l",w);else if("HR"==D){if(o._g.o){var g,_w;l=(_w=(g=o._g.o)._a==o?o._g.o.L+o._e.hd.tab.o.offsetLeft+o._e.hd.tab.o.offsetWidth:o.o.offsetLeft+o.o.offsetWidth)+_p.tSP,_w+=w+_p.tSP;for(var x=o._g.i+1;x<g.ch.length;x++){var z=null,ow=0,gl=0,q=0,c,u=(c=g.ch[x])._e.hd.tab.o.offsetWidth;if(null==_p.mE.ldT.fE&&(_p.mE.ldT.fE=c),_w+u>g.L+g.W&&(q=1),g._a==c?(z=c._e.hd.tab.o,ow=c._e.hd.tab.o.offsetLeft+w+_p.tSP,gl=c._e.hd.tab.o.offsetLeft+c._e.hd.tab.o.offsetWidth):(z=c.o,ow=_w+_p.tSP,gl=g.L+g.W),q?ow+u>gl?(z==c.o?(z.style.left=ow+"px",z.style.width=gl-ow+"px"):z.style.left=ow+"px",_p.rnot(c)):(z==c.o?z.style.width="0":c._e.hd.tab.o.style.left=-(g.L-u)+"px",shE(c._e.hd.tab.notif.o)):z.style.left=ow+"px",_w+=u+_p.tSP,c._g.h)break}l+w>g.L+g.W&&(w-=l+w-(g.L+g.W)),_p.mE.ldT.hE=o}else _cST(o._e.hd.tab.o,"l",0),l+=o._e.hd.tab.o.offsetLeft+o._e.hd.tab.o.offsetWidth;_p.rnot(o)}}else if(h=o.o.offsetHeight,w=o.o.offsetWidth,"RU"==D)h/=2;else if("RD"==D)t+=h/=2;else if("CL"==D)w/=2;else{if("CR"!=D)return;l+=w/=2}else if(h=_p.H,w=_p.W,t=0,l=0,"H"==_p._RT.value().type&&("CL"==D||"CR"==D)||"V"==_p._RT.value().type&&("RU"==D||"RD"==D))"RU"==D||"RD"==D?h=_p.H/2:w=_p.W/2,"RD"==D?t+=h:"CR"==D&&(l+=w);else for(var e=0;e++<_p._RT.size;_p._RT.next()){var p=_p._RT.value();if(("RU"==D||"CL"==D)&&0==p.s.id){t=0,l=0,"H"==p.type?h=p.T/2:w=p.L/2;break}if(("RD"==D||"CR"==D)&&p.s.id==_p._RT.size-1){"H"==p.type?(h=(_p.H-p.T)/2,l=0,t=p.T+h+_p.B):(w=(_p.W-p.L)/2,t=0,l=p.L+w+_p.B);break}}1==rdis?(rCls(_p.dArea,"_nl_dockHeader"),rCls(_p.dArea,"_nl_dockTab"),aCls(_p.dArea,"_nl_dockRoot"),h-=_p.drH,w-=_p.drW):hdr?(rCls(_p.dArea,"_nl_dockTab"),aCls(_p.dArea,"_nl_dockHeader"),_p.rnot(o),h-=_p.daH,w-=_p.daW):(rCls(_p.dArea,"_nl_dockHeader"),aCls(_p.dArea,"_nl_dockTab"),h-=_p.daH,w-=_p.daW,o._g.o?_p.utgG(o._g.o):(_cST(o._e.hd.tab.o,"l",0),_p.rnot(o)),_p.mE.ldT.hE=null),shE(_p.dArea,1),_cST(_p.dArea,"h",h),_cST(_p.dArea,"w",w),_cST(_p.dArea,"t",t),_cST(_p.dArea,"l",l),_cST(_p.dArea,"z",5),_nl_FadeDock(_p.dArea,0,.4),_p.mE.ldT.D=D,_p.mE.ldT.h=h,_p.mE.ldT.w=w,_p.mE.ldT.t=t,_p.mE.ldT.l=l}_p.mE.ldT.o=_p.mE.laT,_p.mE.ldT.X=left,_p.mE.ldT.Y=top,_p.mE.ldT.R=rdis}},NavLayout.prototype._del=function(e,r,u){if(e.remove(r.o),u&&("H"==r.type||"V"==r.type)&&r.s.id>-1){for(var i=0;i++<e.size;e.next()){var b=e.value();b.type==r.type&&b.s.id>r.s.id&&(b.s.id=b.s.id-1)}r.s.id=-1}},NavLayout.prototype.detach=function(o){if(o){var _p=this;if(o._g.o)_p.delTabGrp(o);else if(o.pt&&o.pt.size>0){for(var a=null,x=0;x++<o.pt.size;o.pt.next())null==a?a=o.pt.value():o.pt.value().s.id<a.s.id&&(a=o.pt.value());_p.sg=_p.sg+1;for(var gz=o.pt.size,c=null,r=null,m=0;m<a.EvReg.length;m++)rlr(a.o,a.EvReg[m].type,a.EvReg[m].callback);_p._del(o.pt,a),_p._RC.remove(a.o),a.o.parentNode.removeChild(a.o);var aid=a.s.id;if(a.pt&&0==a.pt.size&&(delete a.pt,a.pt=null),null!=a.pt||a.W!=_p.W&&a.H!=_p.H){if(a.pt)for(var i=0;i++<a.pt.size;a.pt.next()){var v=a.pt.value();"H"==v.type?a.T<v.T?_p._del(v.s.P,a,1):_p._del(v.s.N,a,1):"V"==v.type&&(a.L<v.L?_p._del(v.s.P,a,1):_p._del(v.s.N,a,1))}}else _p._del(_p._RT,a,1);var rc=0;if("H"==a.type?(o.T<a.T?(c=a.s.P,r=a.s.N,rc=1):(c=a.s.N,r=a.s.P,rc=2),_p._del(c,o)):"V"==a.type&&(o.L<a.L?(c=a.s.P,r=a.s.N,rc=1):(c=a.s.N,r=a.s.P,rc=2),_p._del(c,o)),1==gz){if(r){for(var z=null,se=0,_pi=0,i=0;i++<r.size;r.next()){var b=r.value();if(_p._del(b.pt,a),"H"==a.type){var t=b.T,h=b.H,_ty="H"==b.type||"V"==b.type?1:null;if(b.H+=o.H+_p.B,"G"!=b.type&&_cST(b.o,"h",b.H-(_ty?_p.d2:0)),1==rc&&(b.T=o.T,"G"!=b.type&&_cST(b.o,"t",b.T)),"G"!=b.type&&b._e.item&&rItem(_p,b),"G"==b.type?_p.utgG(b):"T"==b.type&&(_p.rnot(b),_p.emit("resize",b)),_ty){for(var n=0;n++<b.s.P.size;b.s.P.next())_p.eRSZ(b.s.P.value(),h,b.L-b.s.S,b.H,b.L-b.s.S,t,b.s.S,b.T,b.s.S,b.s.P.size*_p.B,_p.sg);for(var n=0;n++<b.s.N.size;b.s.N.next())_p.eRSZ(b.s.N.value(),h,b.s.E-(b.L+_p.B),b.H,b.s.E-(b.L+_p.B),t,b.L+_p.B,b.T,b.L+_p.B,b.s.N.size*_p.B,_p.sg)}}else if("V"==a.type){var l=b.L,w=b.W,_ty="H"==b.type||"V"==b.type?1:null;if(b.W+=o.W+_p.B,"G"!=b.type&&_cST(b.o,"w",b.W-(_ty?_p.d2:0)),1==rc&&(b.L=o.L,"G"!=b.type&&_cST(b.o,"l",b.L)),"G"!=b.type&&1==b.wd&&rItem(_p,b),"G"==b.type?_p.utgG(b):"T"==b.type&&(_p.rnot(b),_p.emit("resize",b)),_ty){for(var n=0;n++<b.s.P.size;b.s.P.next())_p.eRSZ(b.s.P.value(),b.T-b.s.S,w,b.T-b.s.S,b.W,b.s.S,l,b.s.S,b.L,b.s.P.size*_p.B,_p.sg);for(var n=0;n++<b.s.N.size;b.s.N.next())_p.eRSZ(b.s.N.value(),b.s.E-(b.T+_p.B),w,b.s.E-(b.T+_p.B),b.W,b.T+_p.B,l,b.T+_p.B,b.L,b.s.N.size*_p.B,_p.sg)}}b.pt&&b.pt.size?(z=b.pt,se=1):z=a.pt}if(z)for(var f=null,l=null,sg=-1,pid=-1,x=0;x++<z.size;z.next()){var t=0,p;if((p=z.value()).sg!=_p.sg){p.sg=_p.sg;var osb=p.s.S,oeb=p.s.E,otp=p.T,olt=p.L;"H"==p.type?a.T<p.T?(t=1,se&&(p.s.S-=o.H+_p.B)):se&&(p.s.E+=o.H+_p.B):"V"==p.type&&(a.L<p.L?(t=1,se&&(p.s.S-=o.W+_p.B)):se&&(p.s.E+=o.W+_p.B)),"H"==p.type?pid=a.T<p.T?p.s.id:p.s.id+1:"V"==p.type&&(pid=a.L<p.L?p.s.id:p.s.id+1);for(var upd=0,y=0;y++<r.size;r.next()){var w;if((w=r.value()).type!=p.type)1==t?p.s.P.put(w.o,w):p.s.N.put(w.o,w),w.pt.put(p.o,p);else if(sg!=_p.sg){if(w.s.id=w.s.id+pid,p.W>=_p.W||p.H>=_p.H)_p._add(_p._RT,w,r.size,pid,upd),upd=1,w.pt&&delete w.pt,w.pt=null;else for(var flg=1,e=0;e++<p.pt.size;p.pt.next()){var d=p.pt.value();w.pt.put(d.o,d),"H"==p.type?p.L<d.L?(_p._add(d.s.P,w,r.size,pid,upd),upd=1):(_p._add(d.s.N,w,r.size,pid,upd),upd=1):"V"==p.type&&(p.T<d.T?(_p._add(d.s.P,w,r.size,pid,upd),upd=1):(_p._add(d.s.N,w,r.size,pid,upd),upd=1)),1==flg&&(flg=0)}(null==f||w.s.id<f.s.id)&&(f=w),(null==l||w.s.id>l.s.id)&&(l=w)}}if(sg=_p.sg,f&&f.s.id==p.s.id+1){"H"==f.type?p.s.E=f.T:"V"==f.type&&(p.s.E=f.L);for(var q=0;q++<f.s.P.size;f.s.P.next()){var k=f.s.P.value();p.s.N.put(k.o,k),k.pt.put(p.o,p)}}else if(l&&p.s.id==l.s.id+1){"H"==f.type?p.s.S=l.T+_p.B:"V"==f.type&&(p.s.S=l.L+_p.B);for(var q=0;q++<l.s.N.size;l.s.N.next()){var k=l.s.N.value();p.s.P.put(k.o,k),k.pt.put(p.o,p)}}}}else if((z=_p._RT).size)for(var x=0;x++<z.size;z.next()){var p;if((p=z.value()).s.id==aid||p.s.id==aid-1){"H"==p.type?a.T<p.T?p.s.S-=o.H+_p.B:p.s.E+=o.H+_p.B:"V"==p.type&&(a.L<p.L?p.s.S-=o.W+_p.B:p.s.E+=o.W+_p.B);for(var i=0;i++<r.size;r.next()){var w;(w=r.value()).pt.put(p.o,p)}}}else for(var i=0;i++<r.size;r.next()){var w;(w=r.value()).pt&&delete w.pt,w.pt=null,_p._RT.put(w.o,w)}}}else{var b,f=null,osb=(b=o.pt.value()).s.S,oeb=b.s.E,otp=b.T,olt=b.L,OH,OW,NH,NW,OT,OL,NT,NL;"H"==b.type?(f=o.T<b.T?b.s.P:b.s.N,_p._del(f,o),1==rc?(b.s.E=a.s.E,b.T+=(o.H+_p.B)/2,_cST(b.o,"t",b.T+_p.d4)):(b.s.S=a.s.S,b.T-=(o.H+_p.B)/2,_cST(b.o,"t",b.T+_p.d4))):"V"==b.type&&(f=o.L<b.L?b.s.P:b.s.N,_p._del(f,o),1==rc?(b.s.E=a.s.E,b.L+=(o.W+_p.B)/2,_cST(b.o,"l",b.L+_p.d4)):(b.s.S=a.s.S,b.L-=(o.W+_p.B)/2,_cST(b.o,"l",b.L+_p.d4)));for(var x=0;x++<r.size;r.next()){var m;(m=r.value()).pt.put(b.o,b),f.put(m.o,m),_p._del(m.pt,a)}for(var U=null,D=null,i=0;i++<b.s.P.size;b.s.P.next()){var q=b.s.P.value();"H"==b.type?(OH=a.T-a.s.S,OW=a.W,NH=b.T-b.s.S,NW=b.W,OT=a.s.S,OL=a.L,NT=b.s.S,NL=b.L):"V"==b.type&&(OH=a.H,OW=a.L-a.s.S,NH=b.H,NW=b.L-b.s.S,OT=a.T,OL=a.s.S,NT=b.T,NL=b.s.S),_p.eRSZ(q,OH,OW,NH,NW,OT,OL,NT,NL,b.s.P.size*_p.B,_p.sg),null==U&&q.pt&&(U=q.pt)}for(var i=0;i++<b.s.N.size;b.s.N.next()){var q=b.s.N.value();"H"==b.type?(OH=oeb-(otp+_p.B),OW=b.W,NH=b.s.E-(b.T+_p.B),NW=b.W,OT=otp+_p.B,OL=b.L,NT=b.T+_p.B,NL=b.L):"V"==b.type&&(OH=b.H,OW=oeb-(olt+_p.B),NH=b.H,NW=b.s.E-(b.L+_p.B),OT=b.T,OL=olt+_p.B,NT=b.T,NL=b.L+_p.B),_p.eRSZ(q,OH,OW,NH,NW,OT,OL,NT,NL,b.s.N.size*_p.B,_p.sg),null==D&&q.pt&&(D=q.pt)}if(U)for(var i=0;i++<U.size;U.next()){var q;(q=U.value())!=b&&("H"==q.type?q.T<b.T?q.s.E=b.T:q.s.S=b.T+_p.B:"V"==q.type&&(q.L<b.L?q.s.E=b.L:q.s.S=b.L+_p.B))}if(D)for(var i=0;i++<D.size;D.next()){var q;(q=D.value())!=b&&("H"==q.type?q.T<b.T?q.s.E=b.T:q.s.S=b.T+_p.B:"V"==q.type&&(q.L<b.L?q.s.E=b.L:q.s.S=b.L+_p.B))}_p._del(o.pt,b)}a.pt&&a.pt.removeAll()}}},NavLayout.prototype.attach=function(t,s,dr){var _p=this,ret=0;if(""==dr&&(dr="RD"),_p.mE.dob&&_nl_DEBUG&&console.log('_at.push({s: "'+s.name+'", t: "'+(t?t.name:"-")+'", d: "'+dr+'"});'),"HL"!=dr&&"HR"!=dr){if(null==t&&(_p._RT.size<1||1==_p._RT.size&&"T"==_p._RT.value().type&&_p.mE.dob==_p._RT.value()))return null==_p._RT.get(s.o)&&_p._RT.put(s.o,s),s.H=_p.H,s.W=_p.W,s.T=0,s.L=0,_p.maxTabGrp(s,s.L),void emitR(_p,s);if(null==t&&1==_p._RT.size&&("H"!=(t=_p._RT.value()).type&&"V"!=t.type||(t=null)),("RU"==dr||"RD"==dr||"CL"==dr||"CR"==dr)&&(t&&"T"==t.type&&t._g.o&&(t=t._g.o),s)){var sp=document.createElement("div");sp.className="_nl_sp";var sz=_p.B,pc=null,nc=null,pcp=null,ncp=null,rpn=0,rc={name:"splitter",type:null,o:null,_e:null,H:0,W:0,T:0,L:0,s:null,pt:new _T,sg:0,mz:0,po:0,ste:0,_g:null,EvReg:[],_e:{tabs:{r:null,tab:null},ctl:{o:null,ctrl:[],add:null,del:null},item:null}};if(rc.s={P:new _T,N:new _T,S:0,E:0,id:0},rc.o=sp,null==t){if(t={H:0,W:0,T:0,L:0},ret=1,"H"==_p._RT.value().type&&("CL"==dr||"CR"==dr)||"V"==_p._RT.value().type&&("RU"==dr||"RD"==dr)){_p.sg+=1,t.T=0,t.L=0,t.H=_p.H,t.W=_p.W;for(var e=0;e++<_p._RT.size;_p._RT.next()){var c=_p._RT.value(),h1=_p.H,w1=_p.W,t1=c.T,l1=c.L;c.pt?c.pt.removeAll():c.pt=new _T,c.pt.put(rc.o,rc),"RU"==dr||"CL"==dr?("RU"==dr?t1=(h1=t.H/2-sz/2)+sz:l1=(w1=t.W/2-sz/2)+sz,rc.s.N.put(c.o,c),rcp=rc.s.P):"RD"!=dr&&"CR"!=dr||("RD"==dr?h1=t.H/2-sz/2:w1=t.W/2-sz/2,rc.s.P.put(c.o,c),rcp=rc.s.N),_p.eRSZ(c,_p.H,_p.W,h1,w1,c.T,c.L,t1,l1,c.s.N.size*_p.B,_p.sg)}_p._RT.removeAll(),rcp.put(s.o,s)}else{for(var g=null,OH,OW,NH,NW,OT,OL,NT,NL,e=0;e++<_p._RT.size;_p._RT.next()){var p;OH=(p=_p._RT.value()).H,OW=p.W,NH=p.H,NW=p.W,OT=p.T,OL=p.L,NT=p.T,NL=p.L;var osb=p.s.S,oeb=p.s.E,otp=p.T,olt=p.L;if(t.T=0,t.L=0,t.H=p.H,t.W=p.W,("RU"==dr||"CL"==dr)&&0==p.s.id){rc.s.id=0,g=p.s.P,rcc=rc.s.N,rcp=rc.s.P,"RU"==dr?t.H=-1:t.W=-1,-1==t.H?(t.H=p.T,p.s.S=t.H/2+sz/2,OH=otp-osb,NH=p.T-p.s.S,OT=osb,NT=p.s.S):-1==t.W&&(t.W=p.L,p.s.S=t.W/2+sz/2,OW=olt-osb,NW=p.L-p.s.S,OL=osb,NL=p.s.S);break}if(("RD"==dr||"CR"==dr)&&p.s.id==_p._RT.size-1){t.T=p.T,t.L=p.L;var e1=p.H;e2=p.W,rc.s.id=_p._RT.size,g=p.s.N,rcc=rc.s.P,rcp=rc.s.N;var th=0;"RD"==dr?(th=p.T,t.T+=sz,t.H=-1):(th=p.L,t.L+=sz,t.W=-1);var eb=p.s.E-(th+_p.B);-1==t.H?(t.H=eb,p.s.E=t.T+t.H/2-sz/2+_p.d4,e1/=2,OH=oeb-(otp+_p.B),NH=p.s.E-(p.T+_p.B),OT=otp+_p.B,NT=p.T+_p.B):-1==t.W&&(t.W=eb,p.s.E=t.L+t.W/2+sz/2-sz+_p.d4,OW=oeb-(olt+_p.B),NW=p.s.E-(p.L+_p.B),OL=olt+_p.B,NL=p.L+_p.B);break}}if(g){_p.sg+=1;for(var e=0;e++<g.size;g.next()){var c=g.value();rcc.put(c.o,c),c.pt.put(rc.o,rc),_p.eRSZ(c,OH,OW,NH,NW,OT,OL,NT,NL,g.size*_p.B,_p.sg)}}rcp.put(s.o,s)}s.pt?s.pt.removeAll():s.pt=new _T,s.pt.put(rc.o,rc)}if("RU"==dr||"RD"==dr){var _t=t.T+t.H/2-sz/2,m;rpn=_t,sp.style.cssText=_bp+"cursor:ns-resize;position:absolute;top:"+(_t+_p.d4)+"px;height:"+_p.d0+"px;left:"+t.L+"px;width:"+(t.W-_p.d2)+"px",rc.type="H",rc.H=_p.d0,rc.W=t.W,rc.T=_t,rc.L=t.L,rc.s.S=t.T,rc.s.E=t.T+t.H,(m=document.createElement("div")).className="_nl_spa",m.style.cssText="opacity:1;cursor:ns-resize;"+_bp+"position:relative;top:"+_p.d0+"px;height:"+_p.d2/2+"px;width:100%",sp.appendChild(m)}else if("CL"==dr||"CR"==dr){var _l=t.L+t.W/2+sz/2,m;rpn=_l,sp.style.cssText=_bp+"cursor:ew-resize;position:absolute;left:"+(_l-sz+_p.d4)+"px;width:"+_p.d0+"px;top:"+t.T+"px;height:"+(t.H-_p.d2)+"px;",rc.type="V",rc.H=t.H,rc.W=_p.d0,rc.T=t.T,rc.L=_l-sz,rc.s.S=t.L,rc.s.E=t.L+t.W,(m=document.createElement("div")).className="_nl_spa",m.style.cssText="opacity:1;cursor:ew-resize;"+_bp+"position:relative;left:"+_p.d0+"px;width:"+_p.d2/2+"px;height:100%",sp.appendChild(m)}if(_p.o.appendChild(sp),_p._RC.put(sp,rc),_p._nlDG(rc,sp),ret)return _p._add(_p._RT,rc,1,rc.s.id,0),_p.sg+=1,void _p.eRSZ(rc,t.H,t.W,t.H,t.W,rc.T,rc.L,rc.T,rc.L,_p._RT.size,_p.sg);"RU"==dr?(rc.s.P.put(s.o,s),rc.s.N.put(t.o,t),pc=s,nc=t,s.T=t.T,_cST(s.o,"t",s.T),s.L=t.L,_cST(s.o,"l",s.L),s.H=t.H/2-sz/2,_cST(s.o,"h",s.H),s.W=t.W,_cST(s.o,"w",s.W),t.T=t.T+t.H/2+sz/2,t.H=t.H/2-sz/2,"T"==t.type?(_cST(t.o,"t",t.T),_cST(t.o,"h",t.H)):_p.utgG(t)):"RD"==dr?(rc.s.P.put(t.o,t),rc.s.N.put(s.o,s),pc=t,nc=s,s.T=t.T+t.H/2+sz/2,_cST(s.o,"t",s.T),s.L=t.L,_cST(s.o,"l",s.L),s.H=t.H/2-sz/2,_cST(s.o,"h",s.H),s.W=t.W,_cST(s.o,"w",s.W),t.H=t.H/2-sz/2,"T"==t.type?_cST(t.o,"h",t.H):_p.utgG(t)):"CL"==dr?(rc.s.P.put(s.o,s),rc.s.N.put(t.o,t),pc=s,nc=t,s.T=t.T,_cST(s.o,"t",s.T),s.H=t.H,_cST(s.o,"h",s.H),s.L=t.L,_cST(s.o,"l",s.L),s.W=t.W/2-sz/2,_cST(s.o,"w",s.W),t.L=t.L+t.W/2+sz/2,t.W=t.W/2-sz/2,"T"==t.type?(_cST(t.o,"l",t.L),_cST(t.o,"w",t.W)):_p.utgG(t)):"CR"==dr&&(rc.s.P.put(t.o,t),rc.s.N.put(s.o,s),pc=t,nc=s,s.T=t.T,_cST(s.o,"t",s.T),s.H=t.H,_cST(s.o,"h",s.H),s.L=t.L+t.W/2+sz/2,_cST(s.o,"l",s.L),s.W=t.W/2-sz/2,_cST(s.o,"w",s.W),t.W=t.W/2-sz/2,"T"==t.type?_cST(t.o,"w",t.W):_p.utgG(t)),rItem(_p,s),"T"==t.type&&rItem(_p,t);var id=-1,pn=0;if(t.pt&&t.pt.size>0)for(var e=0;e++<t.pt.size;t.pt.next()){var p=t.pt.value(),si=0;rc.type!=p.type?("H"==p.type?rc.T<p.T&&(si=1):"V"==p.type&&rc.L<p.L&&(si=1),1==si?(p.s.P.remove(t.o),p.s.P.put(rc.o,rc)):(p.s.N.remove(t.o),p.s.N.put(rc.o,rc)),rc.pt.put(p.o,p)):((p.s.id<id||-1==id)&&(id=p.s.id,"H"==p.type?pn=p.T:"V"==p.type&&(pn=p.L)),p.s.P.remove(t.o),p.s.N.remove(t.o))}else delete t.pt,t.pt=null,_p._RT.removeAll(),_p._RT.put(rc.o,rc);if(id>-1){rc.s.id=rpn<pn?id:id+1;var ct=0;if(p.W>=_p.W||p.H>=_p.H)pt=t.p,_p._add(_p._RT,rc,1,rc.s.id,0),rc.pt&&delete rc.pt,rc.pt=null,ct=1;else{for(var lp=null,pt=t.pt.value(),e=0;e++<pt.pt.size;pt.pt.next()){var p,si=0;"H"==(p=pt.pt.value()).type?rc.T<p.T&&(si=1):"V"==p.type&&rc.L<p.L&&(si=1),1==si?(lp=p.s.P,p.s.P.put(rc.o,rc)):(lp=p.s.N,p.s.N.put(rc.o,rc)),rc.pt.put(p.o,p)}for(var i=0;i++<lp.size;lp.next()){var b=lp.value();b.type&&b.type==rc.type&&b!=rc&&b.s.id>=rc.s.id&&(b.s.id=b.s.id+1)}}for(var e=0;e++<t.pt.size;t.pt.next()){var p;(p=t.pt.value()).s.id<rc.s.id?("H"==p.type?p.s.E=rc.T:p.s.E=rc.L,p.s.N.put(pc.o,pc),pcp=p):p.s.id>rc.s.id&&("H"==p.type?p.s.S=rc.T+sz:p.s.S=rc.L+sz,p.s.P.put(nc.o,nc),ncp=p)}}return s.pt?s.pt.removeAll():s.pt=new _T,t.pt?t.pt.removeAll():t.pt=new _T,s.pt.put(rc.o,rc),t.pt.put(rc.o,rc),pcp&&pc.pt.put(pcp.o,pcp),ncp&&nc.pt.put(ncp.o,ncp),_p.rnot(s),_p.rnot(t),emitR(_p,s),void emitR(_p,t)}}else _p.addTabGrp(t,s,dr)};